{% extends "templates/base.html" %}

{% block title %}The leading operating system for PCs, IoT devices, servers and the cloud{% endblock %}
{% block extra_body_class %}homepage {% block takeover_body_class %}{% endblock takeover_body_class %}{% endblock extra_body_class %}

{% block meta_copydoc %}https://docs.google.com/document/d/1ySJxQbqVdeH4Tra0zwBm2Tn0s56kFGnEF7d8xDRTxwU/edit{% endblock %}

{% block outer_content %}
  {% block content %}
    <template id="takeovers" class="u-hide">
      {% block takeover_content %}
      {% endblock takeover_content %}
    </template>

    <!-- Default Takeover: Download the latest Ubuntu -->
    <section data-lang="all" id="takeover" class="p-strip--image is-dark is-deep" style="background-color: #5E2750; background-image: linear-gradient(110deg, #5E2750 20%, #2C001E 46%, #2C001E 60%);">
      <div class="row">
        <div class="col-12 suffix-4">
          <h1 style="font-weight: 100;">Ubuntu {{ latest_release }} is here</h1>
          <p>The latest version of the world’s most widely used Linux platform for Kubernetes, multi-cloud and machine learning.</p>
          <p class="u-no-margin--bottom"><a href="/download" class="p-button--neutral u-no-margin--bottom">Download Ubuntu {{ latest_release }} now</a></p>
        </div>
      </div>
    </section>

    <section class="p-strip--accent is-shallow is-dark">
      <div class="row">
        <div class="col-12">
          <p class="u-no-max-width p-heading--four u-no-margin--bottom u-vertically-center">
            <img src="https://assets.ubuntu.com/v1/838316ab-cof-25x25.png" alt="" />&nbsp;&nbsp;
            <a href="https://blog.ubuntu.com/2018/10/30/statement-on-ibm-acquisition-of-red-hat" class="p-link--inverted p-link--external">Statement on the IBM acquisition of Red Hat</a>
        </div>
      </div>
    </section>

    <section class="p-strip is-deep is-bordered">
      {% include "shared/_insights_news_strip.html" with gtm_event_label="ubuntu.com homepage" %}
    </section>

    <section class="p-strip--light is-bordered">
      <div class="row u-align--center">
        <div class="col-12">
          <h2 class="p-heading--three u-no-max-width">
            Ubuntu is an open source software operating system that runs from the desktop, to the cloud, to all your internet connected things
          </h2>
        </div>
        <div class="p-ubuntu-intro u-align--center">
          <div class="p-ubuntu-intro__content">
            <ul class="p-ubuntu-intro__list no-bullets inline">
              <li class="p-ubuntu-intro__list-item"><a class="p-ubuntu-intro__link p-ubuntu-intro__link--cloud" href="/cloud">Cloud</a></li>
              <li class="p-ubuntu-intro__list-item"><a class="p-ubuntu-intro__link p-ubuntu-intro__link--server" href="/server">Server</a></li>
              <li class="p-ubuntu-intro__list-item"><a class="p-ubuntu-intro__link p-ubuntu-intro__link--containers" href="/containers">Containers</a></li>
              <li class="p-ubuntu-intro__list-item"><a class="p-ubuntu-intro__link p-ubuntu-intro__link--desktop" href="/desktop">Desktop</a></li>
              <li class="p-ubuntu-intro__list-item"><a class="p-ubuntu-intro__link p-ubuntu-intro__link--iot" href="/internet-of-things">IoT</a></li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    {# strip cloud #}
    <section class="p-strip is-deep u-image-position is-bordered u-vertically-center">
      <div class="row">
        <div class="col-7">
          <img src="{{ ASSET_SERVER_URL }}0bfbd13b-cloud_section_bundle.svg?h=460" class="u-image-position--top u-hide--small" alt="" style="height: 100%; right: 47%;" />
        </div>
        <div class="col-5">
          <h3><a href="/openstack/managed">The world’s most popular operating system across public clouds and OpenStack clouds&nbsp;&rsaquo;</a></h3>
          <p>Find out more about Ubuntu’s cloud building software, tools and service packages.</p>
        </div>
      </div>
    </section>

    {# strip iot #}
    <section class="p-strip--light is-deep is-bordered">
      <div class="row">
        <div class="u-equal-height u-vertically-center">
          <div class="col-5 suffix-1">
            <h3><a href="/internet-of-things">The fastest way to go from development to production in IoT&nbsp;&rsaquo;</a></h3>
            <p>Learn about how Ubuntu Core and snaps can help you build your connected devices.</p>
          </div>
          <div class="col-7 u-align--center">
            <img class="u-hide--small" src="{{ ASSET_SERVER_URL }}808a4e5b-iot.png?h=300" alt="" />
          </div>
        </div>
      </div>
    </section>

    {# strip containers #}
    <section class="p-strip is-deep is-bordered">
      <div class="row">
        <div class="u-equal-height u-vertically-center">
          <div class="col-7">
            <img src="{{ ASSET_SERVER_URL }}668136e7-containers.svg" class="u-hide--small" style="height: 85%;" alt="" />
          </div>
          <div class="col-5 suffix-1">
            <h3><a href="/containers">The number one platform for containers&nbsp;&rsaquo;</a></h3>
            <p>From LXD to Kubernetes to Docker, Ubuntu can run your containers at scale.</p>
          </div>
        </div>
      </div>
    </section>

    {# strip desktop #}
    <section class="p-strip--light is-deep is-bordered">
      <div class="row">
        <div class="u-equal-height u-vertically-center">
          <div class="col-5 suffix-1">
            <h3><a href="/desktop">Fast, secure and simple, Ubuntu powers millions of PCs worldwide&nbsp;&rsaquo;</a></h3>
            <p>Download the latest version of Ubuntu, for desktop PCs and laptops.</p>
          </div>
          <div class="col-7 u-align--center">
            <img class="u-hide--small" src="{{ ASSET_SERVER_URL }}c6504e94-Dell_XPS_Laptop_Front-Desktop.png?h=350" alt="" />
          </div>
        </div>
      </div>
    </section>

    {# strip takeunders #}
    <section class="p-strip">
      <div class="row u-equal-height">
        {% include "takeovers/takeunders/_ubuntu-product-month.html" %}
        {% include "takeovers/takeunders/_openstack-ebook.html" %}
      </div>
    </section>

    {% comment %}
    <style type="text/css">
    /* background image for the event feature */
    /* get original using this //maps.googleapis.com/maps/api/staticmap?center=Tokyo%2C+Japan&zoom=14&scale=2&size=1200x320&maptype=satellite but with the location details from the insights event */
    /*.featured--event:before { background-image: url('{{ ASSET_SERVER_URL }}62b7ce67-pasadena.png?fmt=jpg&q=20'); }*/
    </style>
    {% endcomment %}

    {% block footer_content %}
      {# include "ubuntu/takeovers/_footer_homepage.html" #}
    {% endblock footer_content %}
    <script>
      // detect the user's browser's language setting
      var detectLanguage = function () {
        var lang = window.navigator.languages ? window.navigator.languages[0] : null;
        lang = lang || window.navigator.language ||
        window.navigator.browserLanguage || window.navigator.userLanguage;

        if (lang && lang.length) {
          return lang;
        } else {
          return null
        }
      };
    </script>

    <script>
      if (window.localStorage && window.sessionStorage) {
        /**
         * Choose a takeover
         * ===
         * 
         * From the list of provided takeovers in the #takeovers template,
         * choose one (that matches the client's language), and replace the
         * base template with it.
         */

        var baseTakeover = document.querySelector('section#takeover');  // The base takeover element
        var takeovers = document.querySelector('template#takeovers');  // The list of current takeovers to choose from

        // For browsers that support <template> (all but IE), grab the template's ".content"
        takeovers = 'content' in takeovers ? takeovers.content: takeovers;

        // get the users language and remove any extra detail suffix (e.g. -gb)
        var browserLanguage = detectLanguage();
        var languageClass = browserLanguage || 'en';
        languageClass = languageClass.split('-')[0];

        // find any takeovers that match the users language
        var queryLang = ".js-takeover[data-lang*='"+languageClass+"']";
        var queryAll = ".js-takeover[data-lang*='all']";
        var takeoversFiltered = (takeovers.querySelectorAll([queryLang,queryAll].join(',')));

        // If we have any takeovers
        if (takeoversFiltered) {
          var selectedIndex = null;

          if (
            localStorage.getItem('selected_takeover_index') !== null &&
            parseInt(localStorage.getItem('selected_takeover_index')) < takeoversFiltered.length
          ) {
            // If we previously chose a takeover, use that one
            selectedIndex = parseInt(localStorage.getItem('selected_takeover_index'))
          } else {
            // Otherwise, randomly choose one of the takeovers and store it for next time
            var selectedIndex = Math.floor(Math.random() * takeoversFiltered.length);
            localStorage.setItem('selected_takeover_index', selectedIndex)
          }

          // Get the takeover element
          var selectedTakeover = takeoversFiltered[selectedIndex]

          if (! document.contains(selectedTakeover)) {
            // If it's not in the current document (as in, it's in a template) import it
            // Note: This is for all browser *except* IE, which doesn't support <template>s
            selectedTakeover = document.importNode(selectedTakeover, true);
          }

          // Replace the base takeover with the new one
          // Note: We can't use Node.replaceWith (which would be nice), as it's not supported in IE
          baseTakeover.parentNode.replaceChild(selectedTakeover, baseTakeover)
        }
      }
    </script>
  {% endblock content %}
{% endblock outer_content %}
