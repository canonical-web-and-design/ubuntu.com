{% extends "cube/base_cube.html" %}

{% block title %} Microcerts | CUBE {% endblock %}

{% block meta_description %}This is the CUBE Microcerts page{% endblock meta_description %}

{% block content %}

{% if user %}
<section class="p-strip--suru is-dark is-deep">
  <div class="row u-equal-height">
    <div class="col-8">
      <h1>Your progress to CUBEdom</h1>
      <p>
        Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod
        tempor.
      </p>
    </div>
    <div class="col-4"></div>
  </div>
</section>

<section class="p-strip">
  <div class="u-fixed-width">
    <h2>Microcertifications</h2>
    <table class="p-table--mobile-card">
      <thead>
        <tr>
          <th style="width: 5%" colspan="1">#</th>
          <th colspan="3" class="large-column">Module</th>
          <th colspan="4">Topics</th>
          <th colspan="1" class="small-column">Status</th>
          <th colspan="2" class="u-align--right">Action</th>
        </tr>
      </thead>
      <tbody>
        {% for module in modules %}
        <tr>
          <td aria-label="#">{{ module.number }}.</td>
          <td aria-label="Module" colspan="3" class="large-column">
            <div class="p-heading-icon is-reset">
              <div class="p-heading-icon__header">
                <img
                  class="p-heading-icon__img"
                  src="{{ module.badge }}"
                  alt="Badge for {{ module.name }}"
                />
                <h5 class="p-heading-icon__title">
                  <strong>{{ module.name }}</strong>
                </h5>
              </div>
              <div class="large-column">
                <p class="p-muted-text u-no-padding--top">
                  <small>{{ module.topics|length }} topics</small>
                </p>
              </div>
            </div>
          </td>
          <td aria-label="Topics" colspan="4">
            <div>
              {% for topic in module.topics %}
              <p>{{ topic }}</p>
              {% endfor %}
            </div>
          </td>
          <td class="small-column" aria-label="Status">
            {% if module.status != "Never tried" %}
            <div class="is-reset">
              {% if module.status == "Passed" %}
              {{ 
                image(
                url="https://assets.ubuntu.com/v1/8b3432c9-status-succeeded.svg",
                alt="{{ module.status }}", 
                width="15", 
                height="15", 
                hi_def=True, 
                loading="auto",
                ) |
                safe }}
                {% elif module.status == "Failed" %}
              {{ 
                image(
                url="https://assets.ubuntu.com/v1/8bb9fc23-status-failed.svg",
                alt="{{ module.status }}", 
                width="15", 
                height="15", 
                hi_def=True, 
                loading="auto",
                ) |
                safe }}
                {% endif %}
              <span>{{ module.status }}</span>
              <div class="small-column">
                <p class="p-muted-text">
                  <small>{{ module.date_attempted }}</small>
                </p>
              </div>
            </div>
            {% else %}
            <div class="is-reset">
              <p>Never tried</p>
            </div>
            {% endif %}
          </td>
          <td colspan="2" aria-label="Action">
            {% if module.status != "Passed" %}
            <p>
              <a class="p-button--neutral u-no-margin--right" href="{{ module.training_url }}">Prepare</a>
              <a class="p-button--positive u-no-margin--left" href="{{ module.test_url }}">{{ module.action }}</a>
            </p>
            {% endif %}
          </td>
        </tr>
        {% endfor %}
      </tbody>
    </table>
  </div>
</section>

{% else %}
<section>
  <section class="p-strip">
    <div class="u-fixed-width">
      <h2>Microcertifications</h2>
      <p>Sign in to see your microcertifications</p>
      <p>
        <a
          href="/login"
          class="p-button--neutral"
          onclick="dataLayer.push({
              'event' : 'GAEvent',
              'eventCategory' : 'Advantage',
              'eventAction' : 'Authentication',
              'eventLabel' : 'Sign in',
              'eventValue' : undefined
            });"
        >
          Sign in
        </a>
      </p>
    </div>
  </section>
</section>
{% endif %}
{% endblock content %}
