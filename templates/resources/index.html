{% extends "templates/one-column.html" %}

{% block meta_description %}Resources from across Ubuntu and Canonical combined into a single portal{% endblock %}

{% block title %}Resources{% endblock %}

{% block content %}

<section class="p-strip--accent is-shallow">
  <div class="row">
    <h1>Resources</h1>
  </div>
</section>

<section class="p-strip is-shallow">
  <div class="row">
    <nav class="p-tabs">
      <ul class="p-tabs__list" role="tablist">
        <li class="p-tabs__item" role="presentation">
          <span class="p-tabs__link">Topic:</span>
        </li>
        <li class="p-tabs__item" role="presentation">
          <a href="?" class="p-tabs__link" role="tab" aria-controls="section1"{% if slug == 'all' or slug == None %} aria-selected="true"{% endif %}>All</a>
        </li>
        <li class="p-tabs__item" role="presentation">
          <a href="?topic=cloud-and-server" class="p-tabs__link" role="tab" aria-controls="section1"{% if slug == 'cloud-and-server' %} aria-selected="true"{% endif %}>Cloud and server</a>
        </li>
        <li class="p-tabs__item" role="presentation">
          <a href="?topic=desktop" class="p-tabs__link" role="tab" aria-controls="section2"{% if slug == 'desktop' %} aria-selected="true"{% endif %}>Desktop</a>
        </li>
        <li class="p-tabs__item" role="presentation">
          <a href="?topic=internet-of-things" class="p-tabs__link" role="tab" aria-controls="section3"{% if slug == 'internet-of-things' %} aria-selected="true"{% endif %}>Internet of things</a>
        </li>
      </ul>
    </nav>
  </div>

  {% if items is False %}
  <div class="row">
    <div class="p-notification--negative">
      <p class="p-notification__response"><span class="p-notification__status">Error:</span>The live news feed failed to load. Please <a href="https://github.com/canonical-websites/www.ubuntu.com/issues/new" class="p-link--external">report this bug</a> and our team will fix the problem as soon as&nbsp;possible.</p>
    </div>
  </div>
  {% elif items|length is 0 %}
  <div class="row">
    <div class="p-notification--information">
      <p class="p-notification__response">
        <span class="p-notification__status">Information:</span> There were no results found for this category
      </p>
    </div>
  </div>
  {% endif %}

  {% for group_slug, resources in items.items %}
    <div class="row">
      <h2>{{ resources.group_name }}</h2>
    </div>

    <div class="row u-equal-height">
    {% for resource in resources.items %}
      <div class="p-card col-4">
        {% if resource.featuredmedia %}
          <a href="{{resource.link}}">
            <img src="{{resource.featuredmedia.source_url}}" alt="{{resource.featuredmedia.alt_text}}" />
          </a>
        {% endif %}
        <h3 class="p-header--four"><a href="{{resource.link}}">{{resource.title.rendered | safe}}</a></h3>
        {{resource.excerpt.rendered | safe}}
      </div>

      {% if forloop.counter|divisibleby:3 %}
        </div>
        <div class="row u-equal-height">
      {% endif %}
    {% endfor %}
    </div>
  {% endfor %}
  </div>
</section>

{% endblock content %}
