{% extends "openstack/_base_openstack.html" %}
{% block title %}Install | OpenStack | Ubuntu{% endblock %}
{% block meta_description %}A step-by-step installation guide to Ubuntu OpenStack on bare metal servers.{% endblock %}

{% block content %}
<section class="p-strip--light is-deep is-bordered">
  <div class="row">
    <div class="u-equal-height">
      <div class="col-8">
        <div>
          <h1>Install OpenStack yourself</h1>
          <p>Deploy your production Ubuntu OpenStack cloud across a rack of physical servers. You&rsquo;ll use <a class="p-link--external" href="https://maas.io/">MAAS</a> for physical server provisioning and <a class="p-link--external" href="https://conjure-up.io/">conjure-up</a> to guide you through the process. Model-driven operations simplify running OpenStack at scale.</p>
        </div>
      </div>
      <div class="col-4 u-vertically-center u-align--center u-hide--small">
        <img src="{{ ASSET_SERVER_URL }}95212c08-OpenStack_Logo_2016.svg" alt="" width="275" />
      </div>
    </div>
  </div>
</section>

<div class="p-strip is-deep is-bordered" id="instructions">
  <div class="row">
    <div class="col-12">
      <h2>Installation instructions</h2>
      <ol class="p-stepped-list--detailed">

        <li class="p-list-step__item col-12">
          <h3 class="p-list-step__title"><span class="p-list-step__bullet">1</span>Minimum requirements<sup>*</sup></h3>
          <div class="p-list-step__content">
            <p>4 x Intel x64 servers each with:</p>
            <ul class="p-list">
              <li class="p-list__item">8GB RAM</li>
              <li class="p-list__item">IPMI BMC</li>
            </ul>
            <p>You will also need a switch and router, so these servers are on their own isolated /24 network with a route to the internet. There must not be a DHCP server on this /24 network</p>
            <p><sup>*</sup> <small>Note: for high availability production clouds 12 nodes are required.</small></p>
          </div>
        </li>

        <li class="p-list-step__item col-12">
          <h3 class="p-list-step__title"><span class="p-list-step__bullet">2</span>Set up your hardware</h3>
          <div class="p-list-step__content">
            <p><a href="http://releases.ubuntu.com/16.04/" class="p-link--external">Install Ubuntu Server 16.04 LTS</a> on one of the servers, choosing the smallest server if they are not identical. This is the machine designated to be the MAAS server. It will provide DHCP and DNS to this local /24 network.</p>
            <p>For the simplest topology, connect the second NIC of the dual-nic machine(s) to the same network.</p>
          </div>
        </li>

        <li class="p-list-step__item col-12">
          <h3 class="p-list-step__title"><span class="p-list-step__bullet">3</span>Install MAAS</h3>
          <div class="p-list-step__content">
            <p>On your Ubuntu Server 16.04 LTS machine:</p>
            <div class="p-code-snippet">
              <input class="p-code-snippet__input" value="sudo apt update" readonly="readonly">
              <button class="p-code-snippet__action">Copy to clipboard</button>
            </div>
            <div class="p-code-snippet">
              <input class="p-code-snippet__input" value="sudo apt install maas" readonly="readonly">
              <button class="p-code-snippet__action">Copy to clipboard</button>
            </div>
            <p>Create your admin credentials:</p>
            <div class="p-code-snippet">
              <input class="p-code-snippet__input" value="sudo maas createadmin" readonly="readonly">
              <button class="p-code-snippet__action">Copy to clipboard</button>
            </div>
            <p>Login to the MAAS UI at <code>http://&lt;serverip&gt;/MAAS/</code></p>
            <p>Complete the setup wizard for MAAS and import images for Ubuntu 14.04 LTS and 16.04 LTS. Importing images may take a while, but you can &ldquo;continue&rdquo; as soon as it&rsquo;s started and work on other aspects of MAAS setup while the import happens.</p>
            <p>If you haven&rsquo;t added your SSH key before, now is your chance to import one. MAAS will ensure you can login to any of the machines you deploy using your normal SSH keys.</p>
          </div>
        </li>

        <li class="p-list-step__item col-12">
          <h3 class="p-list-step__title"><span class="p-list-step__bullet">4</span>Configure the subnet and&nbsp;DHCP</h3>
          <div class="p-list-step__content">
            <p>Go to the &ldquo;Subnets&rdquo; tab and verify that &ldquo;gateway&rdquo; and &ldquo;DNS&rdquo; are correct for your subnet.</p>
            <p>Go back to the &ldquo;subnets&rdquo; tab again and this time click on the &ldquo;untagged&rdquo; VLAN. Select &ldquo;Provide dhcp&rdquo; in the &ldquo;Take action&rdquo; button with a suitable dynamic range &mdash; we suggest at least two IPs per NIC in the cluster.</p>
          </div>
        </li>

        <li class="p-list-step__item col-12">
          <h3 class="p-list-step__title"><span class="p-list-step__bullet">5</span>Verify image syncing</h3>
          <div class="p-list-step__content">
            <p>Go to the &ldquo;Images&rdquo; tab and check if the Ubuntu images have all been downloaded and are in a &ldquo;Synced&rdquo; state. Depending on your bandwidth it may take a while for it to finish. You can only proceed with the next steps if the images are synced</p>
          </div>
        </li>

        <li class="p-list-step__item col-12">
          <h3 class="p-list-step__title"><span class="p-list-step__bullet">6</span>Register your hardware with<br /> MAAS</h3>
          <div class="p-list-step__content">
            <p>Ensure all machines are set to PXE boot. We suggest you disable all other boot options, including local disk, in the BIOS</p>
            <p>
            <p>Power the machines on. They will all appear in the “Nodes” tab of MAAS after a while</p>
            <p>Edit each machine, filling in the power type and other parameters, if they are not correct already</p>
            <p>Select all the machines and, using the “Take action” dropdown, “Commission” them</p>
            <p>Wait until all machines have a “Ready” status</p>
            <p>Verify the networking by going to the details page for the node(s) that have multiple NICs and check that the second NIC (the non-PXE one):</p>
            <ul>
              <li>Is connected to the subnet</li>
              <li>Has the “IP address” field set to “unconfigured”</li>
              <li>The first NIC be on the subnet with the IP address field set to “Auto assign”</li>
            </ul>
          </div>
        </li>

        <li class="p-list-step__item col-12">
          <h3 class="p-list-step__title"><span class="p-list-step__bullet">7</span>Install and launch conjure-up</h3>
          <div class="p-list-step__content">
            <p>On the MAAS server, in a terminal window, install conjure-up:</p>
            <div class="p-code-snippet">
              <input class="p-code-snippet__input" value="sudo snap install conjure-up --classic" readonly="readonly">
              <button class="p-code-snippet__action">Copy to clipboard</button>
            </div>
            <div class="p-code-snippet">
              <input class="p-code-snippet__input" value="conjure-up" readonly="readonly">
              <button class="p-code-snippet__action">Copy to clipboard</button>
            </div>
            <p>If successful you should see a screen as below:</p>
            <p>
              <a href="{{ ASSET_SERVER_URL }}b4a8693c-build-openstack-with-conjure-up-1.png">
                <img src="{{ ASSET_SERVER_URL }}b4a8693c-build-openstack-with-conjure-up-1.png?w=424" alt="conjure-up's opening wizard in command line" />
              </a>
            </p>
          </div>
        </li>

        <li class="p-list-step__item col-12">
          <h3 class="p-list-step__title"><span class="p-list-step__bullet">8</span>Select OpenStack hypervisor</h3>
          <div class="p-list-step__content">
            <p>conjure-up offers two options with OpenStack:</p>
            <p>1. OpenStack with NovaLXD</p>
            <p>This installs OpenStack configured to use the LXC &lsquo;machine container&rsquo; hypervisor &mdash; containers that behave like ultra-fast VMs. Choose this option to run Linux workloads in LXD containers, for higher density and for evaluation of OpenStack.</p>
            <p>2. OpenStack with NovaKVM</p>
            <p>This installs OpenStack configured to use the KVM hypervisor ready to launch full virtual machine. We recommend this option for production clouds.</p>
            <p>
              <a href="{{ ASSET_SERVER_URL }}cc479b91-build-openstack-with-conjure-up-2.png">
                <img src="{{ ASSET_SERVER_URL }}cc479b91-build-openstack-with-conjure-up-2.png?w=424" alt="conjure-up's wizard with OpenStack with NovaKVM selected" />
              </a>
            </p>
          </div>
        </li>

        <li class="p-list-step__item col-12">
          <h3 class="p-list-step__title"><span class="p-list-step__bullet">9</span>Configure a new cloud</h3>
          <div class="p-list-step__content">
            <p>Once you have selected OpenStack with &lsquo;NovaKVM&rsquo;, you will be prompted to create a new cloud with MAAS.</p>
            <p>
              <a href="{{ ASSET_SERVER_URL }}610f81f8-build-openstack-with-conjure-up-3.png">
                <img src="{{ ASSET_SERVER_URL }}610f81f8-build-openstack-with-conjure-up-3.png?w=424" alt="conjure-up's wizard asking where to deploy the new cloud" />
              </a>
            </p>
          </div>
        </li>

        <li class="p-list-step__item col-12">
          <h3 class="p-list-step__title"><span class="p-list-step__bullet">10</span>Add MAAS endpoint and credentials</h3>
          <div class="p-list-step__content">
            <p>The MAAS REST API endpoint will be of the form: <code>http://&lt;maas.ip&gt;/MAAS/</code>.</p>
            <p>The api key is found under the MAAS &lsquo;admin&rsquo; acouunt page as shown below.</p>
            <p>
              <a href="{{ ASSET_SERVER_URL }}eda1968c-build-openstack-with-conjure-up-4.png">
                <img src="{{ ASSET_SERVER_URL }}eda1968c-build-openstack-with-conjure-up-4.png?w=424" alt="conjure-up's wizard asking for your MAAS credentials" />
              </a>
            </p>
            <p>
              <a href="{{ ASSET_SERVER_URL }}ff3cfa6b-build-openstack-with-conjure-up-5.png">
                <img src="{{ ASSET_SERVER_URL }}ff3cfa6b-build-openstack-with-conjure-up-5.png?w=424" alt="User preferences for admin interface on MAAS" />
              </a>
            </p>
            <p>Next, you will have the opportunity to configure the individual OpenStack services.</p>
            <p>
              <a href="{{ ASSET_SERVER_URL }}ab7797a1-build-openstack-with-conjure-up-6.png">
                <img src="{{ ASSET_SERVER_URL }}ab7797a1-build-openstack-with-conjure-up-6.png?w=424" alt="Review and configure applications screen on conjure-up" />
              </a>
            </p>
          </div>
        </li>

        <li class="p-list-step__item col-12">
          <h3 class="p-list-step__title"><span class="p-list-step__bullet">11</span>Deploy OpenStack</h3>
          <div class="p-list-step__content">
            <p><strong>Configure:</strong> this will give you the opportunity to change the config of the various OpenStack services.</p>
            <p><strong>Architect:</strong> Choose where to place a service. You do not have to place services manually, as conjure-up can do so automatically.</p>
            <p><strong>Deploy:</strong> Deploy the service</p>
            <p>Once satisfied with the config and architecture you can deploy all remain applications.</p>
            <p>
              <a href="{{ ASSET_SERVER_URL }}85a136cd-build-openstack-with-conjure-up-7.png">
                <img src="{{ ASSET_SERVER_URL }}85a136cd-build-openstack-with-conjure-up-7.png?w=424" alt="conjure-up's status screens, showing a number of applications status" />
              </a>
            </p>
            <p>OpenStack deploying</p>
            <p>To learn more about conjure-up visit <a class="p-link--external" href="http://conjure-up.io/">conjure-up.io</a>.</p>
          </div>
        </li>
      </ol>
    </div>
  </div>
</div>

<div class="p-strip--light is-deep is-bordered">
  <div class="row">
    <div class="u-equal-height">
      <div class="col-4 u-align--center u-hide--small u-vertically-center">
        <img src="{{ ASSET_SERVER_URL }}1f1d581a-picto-quote-orange.svg" width="200" alt="" />
      </div>
      <div class="col-7 prefix-1 u-vertically-center">
        <div class="row">
          <div class="col-12">
            <h2>Need more help?</h2>
            <p>Let our cloud experts help you take the next step.</p>
            <p><a class="p-button--positive" href="/openstack/contact-us?product=openstack-install-build">Contact us</a></p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

{% include "download/shared/_get_ebook.html"%}

{% include "shared/contextual_footers/_contextual_footer.html" with first_item="_cloud_bootstack" second_item="_download_cloud_buy_landscape" third_item="_download_documentation" %}


{% endblock content %}
