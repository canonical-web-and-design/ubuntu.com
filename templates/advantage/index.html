{% extends "advantage/base_advantage.html" %}

{% block title %}Ubuntu Advantage for Infrastructure{% endblock %}
{% block meta_description %}Ubuntu Advantage for Infrastructure offers a single, per-node packaging of the most comprehensive software, security and IaaS support in the industry, with OpenStack support, Kubernetes support included, and Livepatch, Landscape and Extended Security Maintenance to address security and compliance concerns.{% endblock %}
{% block meta_copydoc %}https://docs.google.com/document/d/1AW8wQu1Uvq0xFtd_c2JwNdic075MPOTx7k2KHqFPPeo/edit{% endblock meta_copydoc %}

{% block content %}
<section class="p-strip--suru-half-and-half is-dark">
  <div class="row">
    <div class="col-8">
      <h1>Ubuntu Advantage for Infrastructure</h1>
      <p class="p-heading--four">Ubuntu Advantage for Infrastructure is the most comprehensive Linux enterprise subscription, covering all aspects of open infrastructure.</p>
    </div>
  </div>
</section>


{% if openid %}
<section class="p-strip--light">
  <div class="row">
    <div class="col-10">
      <h2>You are signed in as {{ openid.fullname }} ({{ openid.email }})</h2>
    </div>
    <div class="col-2">
        <a href="/logout" class="u-float-right u-no-margin--right p-button--neutral">Sign out</a>
    </div>
  </div>

  <div class="row">
    <div class="col-8 u-sv3">
      <h3>Your personal subscription</h3>
      <p>You are entitled to use Ubuntu Advantage Essential on 3 machines.</p>
      {% for account in accounts %}
        {% if account.name != '' %}</h3>
          {% for contract in account.contracts %}
          <aside class="p-accordion" role="tablist" aria-multiselect="true" style="border: 1px solid #cdcdcd;">
              <ul class="p-accordion__list" style="margin-bottom: 0;">
                <li class="p-accordion__group">
                  <button type="button" class="p-accordion__tab" id="tab1" role="tab" aria-controls="#tab1-section" aria-expanded="false">Show instructions</button>
                  <section class="p-accordion__panel" id="tab1-section" role="tabpanel" aria-hidden="true" aria-labelledby="tab1-section" style="padding: 0 1rem;">
                    <p>To attach a machine:</p>
                    <div class="p-code-copyable">
                      <input class="p-code-copyable__input" value="sudo ua attach {{ contract.token }}" readonly="readonly">
                      <button class="p-code-copyable__action">Copy to clipboard</button>
                    </div>

                    <p>To detach:</p>

                    <div class="p-code-copyable">
                      <input class="p-code-copyable__input" value="sudo ua attach {{ contract.token }}" readonly="readonly">
                      <button class="p-code-copyable__action">Copy to clipboard</button>
                    </div>
                  </section>
                </li>
              </ul>
            </aside>
          {% endfor %}
        {% endif %}
      {% endfor %}
    </div>
  </div>

  <div class="row">
    <div class="col-12">
      <ul class="p-inline-list">
        <li class="p-inline-list__item">Get instructions for using:</li>
        <li class="p-inline-list__item"><a href="#">Livepatch</a></li>
        <li class="p-inline-list__item"><a href="#">Landscape</a></li>
        <li class="p-inline-list__item"><a href="#">ESM</a></li>
        <li class="p-inline-list__item"><a href="#">FIPS</a></li>
        <li class="p-inline-list__item"><a href="#">EAL2</a></li>
      </ul>
    </div>
  </div>
</section>

<section class="p-strip">
  <div class="row">
    <div class="col-10">
      <h3>Plans for enterprise use</h3>

      {% include "advantage/_table.html" %}
    </div>
  </div>
</section>

<script>
  let toggleElements = document.querySelectorAll('.p-accordion__tab');
  toggleElements.forEach(function(el) {
    el.addEventListener(
    "click",
    function(e) {
      e.preventDefault();
      toggleElements.forEach(function(el) {
        el.setAttribute('aria-expanded', el.getAttribute('aria-expanded') === 'true' ? 'false' : 'true');
        panel = document.querySelector('.p-accordion__panel');
        panel.setAttribute('aria-hidden', panel.getAttribute('aria-hidden') === 'true' ? 'false' : 'true');
      });
    },
    false
    );
  });
</script>
{% else %}
<section class="p-strip--light">
  <div class="row">
    <div class="col-8">
      <h2>Already subscribed?</h2>
      <p><a href="/login" class="p-button--positive">Sign in</a> to access your personal or paid subscriptions.</p>
      <h3>Free for personal use</h3>
      <p>Anyone can use UA Infrastructure Essential for free on up to 3 machines (limitations apply).  All you need is an Ubuntu One account. And if you’re a recognised <a href="https://wiki.ubuntu.com/Membership" class="p-link--external">Ubuntu community member</a>, it’s free on up to 50 machines.</p>
      <p class="u-no-margin--bottom"><a href="/login" class="p-button--neutral">Register / Sign in</a> to get your free subscription.</p>
    </div>
  </div>
</section>

<section class="p-strip">
  {% include "advantage/_table.html" %}
</section>
{% endif %}
{% endblock content %}

